<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>TCP-IMPL Mailing List Archive: TCP RST validation</TITLE>
<META NAME="Author" CONTENT="Fred Bohle  (fab@md.interlink.com)">
<META NAME="Subject" CONTENT="TCP RST validation">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>TCP RST validation</H1>
<!-- received="Wed Mar 11 10:07:15 1998" -->
<!-- isoreceived="19980311150715" -->
<!-- sent="Wed, 11 Mar 1998 13:07:10 -0500" -->
<!-- isosent="19980311180710" -->
<!-- name="Fred Bohle " -->
<!-- email="fab@md.interlink.com" -->
<!-- subject="TCP RST validation" -->
<!-- id="199803111807.NAA09593@fab.md.interlink.com" -->
<STRONG>From:</STRONG> Fred Bohle  (<A HREF="mailto:fab@md.interlink.com?Subject=Re:%20TCP%20RST%20validation&In-Reply-To=&lt;199803111807.NAA09593@fab.md.interlink.com&gt;"><EM>fab@md.interlink.com</EM></A>)<BR>
<STRONG>Date:</STRONG> Wed Mar 11 1998 - 13:07:10 EST
<P>
<!-- next="start" -->
<UL>
<LI><STRONG>Next message:</STRONG> <A HREF="0979.html">Chris Schmechel: "Re: Last Call for Testing Tools I-D"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0977.html">allyn romanow: "New co-chair, Mark Allman"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0984.html">Andi Kleen: "Re: TCP RST validation"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0984.html">Andi Kleen: "Re: TCP RST validation"</A>
<!-- reply="end" -->
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#978">[ date ]</A>
<A HREF="index.html#978">[ thread ]</A>
<A HREF="subject.html#978">[ subject ]</A>
<A HREF="author.html#978">[ author ]</A>
</UL>
<HR NOSHADE><P>
<!-- body="start" -->
<P>
Greetings,
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I am having a problem reconciling the TCP RFC 793, with
<BR>
Unix code, as described in Stevens &amp; Wright, TCP/IP Illustrated,
<BR>
Volume 2.  The RFC says, on P. 37, at the end of section 3.4:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reset Processing
<BR>
&nbsp;&nbsp;&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In all states except SYN-SENT, all reset (RST) segments are validated
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by checking their SEQ-fields.  A reset is valid if its sequence number
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is in the window.  ...
<BR>
<P>But in Stevens, Figure 28-30, Corrections for lines 646-676,
<BR>
(corrected drop code) the comments say:
<BR>
<P>/*
<BR>
&nbsp;* Send an ACK to resynchronize and drop any data.
<BR>
&nbsp;* But keep on processing for RST or ACK.
<BR>
&nbsp;*/ 
<BR>
<P>which the code does.  This leads me to believe that an RST would
<BR>
be accepted no matter what the sequence number was.  That can't
<BR>
be right.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Is this a bug in the code, or a deliberate violation of
<BR>
the RFC?  Or have I missed something?
<BR>
<P><P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We have a situation where an RST packet comes in that has
<BR>
a sequence number which is out of the window (left of the current
<BR>
number by a lot), and the code processes the RST.  But the RFC
<BR>
says not to process it.  I wanted some input before I started making
<BR>
code changes...
<BR>
<P>Fred
<BR>
<P>------------------------------------------------------------------------
<BR>
Fred Bohle			EMAIL: <A HREF="mailto:fab@interlink.com?Subject=Re:%20TCP%20RST%20validation&In-Reply-To=&lt;199803111807.NAA09593@fab.md.interlink.com&gt;">fab@interlink.com</A>
<BR>
Interlink Computer Sciences	AT&amp;T : 410-992-7750 x314
<BR>
9250 Rumsey Road, Suite 200     Home : 410-643-6720
<BR>
Columbia, MD 21045-1946         WWW  : www.interlink.com
<BR>
------------------------------------------------------------------------
<BR>
<P><!-- body="end" -->
<HR NOSHADE>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0979.html">Chris Schmechel: "Re: Last Call for Testing Tools I-D"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0977.html">allyn romanow: "New co-chair, Mark Allman"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0984.html">Andi Kleen: "Re: TCP RST validation"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0984.html">Andi Kleen: "Re: TCP RST validation"</A>
<!-- reply="end" -->
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#978">[ date ]</A>
<A HREF="index.html#978">[ thread ]</A>
<A HREF="subject.html#978">[ subject ]</A>
<A HREF="author.html#978">[ author ]</A>
</UL>
<!-- trailer="footer" -->
<HR NOSHADE>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.hypermail.org/">hypermail 2b29</A> 
: <EM>Tue Sep 19 2000 - 11:52:24 EDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
