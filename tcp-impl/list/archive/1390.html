<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>TCP-IMPL Mailing List Archive: Re: Last Call for TCP Congestion</TITLE>
<META NAME="Author" CONTENT="Vern Paxson (vern@ee.lbl.gov)">
<META NAME="Subject" CONTENT="Re: Last Call for TCP Congestion Control I-D">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Re: Last Call for TCP Congestion Control I-D</H1>
<!-- received="Tue Nov 10 13:28:17 1998" -->
<!-- isoreceived="19981110182817" -->
<!-- sent="Tue, 10 Nov 1998 10:28:03 PST" -->
<!-- isosent="19981110182803" -->
<!-- name="Vern Paxson" -->
<!-- email="vern@ee.lbl.gov" -->
<!-- subject="Re: Last Call for TCP Congestion Control I-D" -->
<!-- id="199811101828.KAA18295@daffy.ee.lbl.gov" -->
<!-- inreplyto="Tue, 10 Nov 1998 10:27:23 PST" -->
<STRONG>From:</STRONG> Vern Paxson (<A HREF="mailto:vern@ee.lbl.gov?Subject=Re:%20Last%20Call%20for%20TCP%20Congestion%20Control%20I-D&In-Reply-To=&lt;199811101828.KAA18295@daffy.ee.lbl.gov&gt;"><EM>vern@ee.lbl.gov</EM></A>)<BR>
<STRONG>Date:</STRONG> Tue Nov 10 1998 - 13:28:03 EST
<P>
<!-- next="start" -->
<UL>
<LI><STRONG>Next message:</STRONG> <A HREF="1391.html">Kevin M. Lahey: "Re: Last Call for TCP Congestion Control I-D"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="1389.html">Vern Paxson: "Last Call for TCP Congestion Control I-D"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="1389.html">Vern Paxson: "Last Call for TCP Congestion Control I-D"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="1391.html">Kevin M. Lahey: "Re: Last Call for TCP Congestion Control I-D"</A>
<!-- reply="end" -->
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#1390">[ date ]</A>
<A HREF="index.html#1390">[ thread ]</A>
<A HREF="subject.html#1390">[ subject ]</A>
<A HREF="author.html#1390">[ author ]</A>
</UL>
<HR NOSHADE><P>
<!-- body="start" -->
<P>
--- draft-ietf-tcpimpl-cong-control-00.txt	Mon Aug 10 09:50:28 1998
<BR>
+++ draft-ietf-tcpimpl-cong-control-01.txt	Tue Nov 10 09:46:25 1998
<BR>
@@ -1,11 +1,10 @@
<BR>
-
<BR>
-TCP Implementation Working Group                              W. Stevens
<BR>
-INTERNET DRAFT                                                Consultant
<BR>
-File: draft-ietf-tcpimpl-cong-control-00.txt                   M. Allman
<BR>
-                                            NASA Lewis/Sterling Software
<BR>
-                                                               V. Paxson
<BR>
+TCP Implementation Working Group                               M. Allman
<BR>
+INTERNET DRAFT                              NASA Lewis/Sterling Software
<BR>
+File: draft-ietf-tcpimpl-cong-control-01.txt                   V. Paxson
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LBNL
<BR>
-                                                            August, 1998
<BR>
+                                                              W. Stevens
<BR>
+                                                              Consultant
<BR>
+                                                          November, 1998
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TCP Congestion Control
<BR>
@@ -55,9 +54,9 @@
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;implementation of these algorithms.
<BR>
&nbsp;
<BR>
&nbsp;
<BR>
-Expires: February, 1999                                           [Page 1]
<BR>
+Expires: June, 1999                                             [Page 1]
<BR>
&nbsp;
<BR>
-draft-ietf-tcpimpl-cong-control-00.txt                       August 1998
<BR>
+draft-ietf-tcpimpl-cong-control-01.txt                     November 1998
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This document is organized as follows.  Section 2 provides various
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;definitions which will be used throughout the paper.  Section 3
<BR>
@@ -106,18 +105,21 @@
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The restart window is the size of the congestion window after a
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TCP restarts transmission after an idle period.
<BR>
&nbsp;
<BR>
+    FLIGHT SIZE:
<BR>
+	The amount of data the has been sent but not yet acknowledged. 
<BR>
+
<BR>
&nbsp;3  Congestion Control Algorithms    
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This section defines the four congestion control algorithms: slow
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start, congestion avoidance, fast retransmit and fast recovery,
<BR>
-    developed in [Jac88] and [Jac90].  In some situations it may be
<BR>
-    beneficial for a TCP sender to be more conservative than the
<BR>
-    algorithms allow, however a TCP MUST NOT be more aggressive than the
<BR>
&nbsp;
<BR>
-Expires: February, 1999                                           [Page 2]
<BR>
+Expires: June, 1999                                             [Page 2]
<BR>
&nbsp;
<BR>
-draft-ietf-tcpimpl-cong-control-00.txt                       August 1998
<BR>
+draft-ietf-tcpimpl-cong-control-01.txt                     November 1998
<BR>
&nbsp;
<BR>
+    developed in [Jac88] and [Jac90].  In some situations it may be
<BR>
+    beneficial for a TCP sender to be more conservative than the
<BR>
+    algorithms allow, however a TCP MUST NOT be more aggressive than the
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;following algorithms allow (that is, MUST NOT send data when the
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value of cwnd computed by the following algorithms would not allow
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the data to be sent).
<BR>
@@ -170,13 +172,13 @@
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;algorithm is used when cwnd &gt; ssthresh.  When cwnd and ssthresh are
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equal the sender may use either slow start or congestion avoidance.
<BR>
&nbsp;
<BR>
-    During slow start, a TCP increments cwnd by at most MSS bytes for
<BR>
-    each ACK received that acknowledges new data.  Slow start ends when
<BR>
-
<BR>
-Expires: February, 1999                                           [Page 3]
<BR>
+Expires: June, 1999                                             [Page 3]
<BR>
&nbsp;
<BR>
-draft-ietf-tcpimpl-cong-control-00.txt                       August 1998
<BR>
+draft-ietf-tcpimpl-cong-control-01.txt                     November 1998
<BR>
&nbsp;
<BR>
+
<BR>
+    During slow start, a TCP increments cwnd by at most MSS bytes for
<BR>
+    each ACK received that acknowledges new data.  Slow start ends when
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cwnd exceeds ssthresh (or, optionally, when it reaches it, as noted
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;above); or when cwnd reaches rwnd; or when congestion is observed.
<BR>
&nbsp;
<BR>
@@ -188,7 +190,8 @@
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cwnd += MSS*MSS/cwnd                       (2)
<BR>
&nbsp;
<BR>
-    This provides an acceptable approximation to the underlying
<BR>
+    This adjustment is executed on every incoming non-duplicate ACK.
<BR>
+    Equation (2) provides an acceptable approximation to the underlying
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;principle of increasing cwnd by 1 full-sized segment per RTT.  (Note
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that for a connection in which the receiver acknowledges every data
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;segment, (2) proves slightly more aggressive than 1 segment per RTT,
<BR>
@@ -223,19 +226,22 @@
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer, the value of ssthresh MUST be set to no more than the value
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;given in equation 3:
<BR>
&nbsp;
<BR>
-              ssthresh = max (min (cwnd, rwnd) / 2, 2*MSS)           (3)
<BR>
+		   ssthresh = max (FlightSize / 2, 2*MSS)             (3)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<BR>
-    Implementation Note: an easy mistake to make is to forget the inner
<BR>
-    min() operation and simply use cwnd, which in some implementations
<BR>
-    may incidentally increase well beyond rwnd.
<BR>
+    As discussed above, FlightSize is the amount of outstanding data in
<BR>
+    the network.
<BR>
&nbsp;
<BR>
-    Furthermore, upon a timeout cwnd MUST be set to no more than the
<BR>
-    loss window, LW, which equals 1 full-sized segment (regardless of
<BR>
-
<BR>
-Expires: February, 1999                                           [Page 4]
<BR>
+Expires: June, 1999                                             [Page 4]
<BR>
&nbsp;
<BR>
-draft-ietf-tcpimpl-cong-control-00.txt                       August 1998
<BR>
+draft-ietf-tcpimpl-cong-control-01.txt                     November 1998
<BR>
&nbsp;
<BR>
+
<BR>
+    Implementation Note: an easy mistake to make is to simply use cwnd,
<BR>
+    rather than FlightSize, which in some implementations may
<BR>
+    incidentally increase well beyond rwnd.
<BR>
+
<BR>
+    Furthermore, upon a timeout cwnd MUST be set to no more than the
<BR>
+    loss window, LW, which equals 1 full-sized segment (regardless of
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the value of IW).  Therefore, after retransmitting the dropped
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;segment the TCP sender uses the slow start algorithm to increase the
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window from 1 full-sized segment to the new value of ssthresh, at
<BR>
@@ -252,31 +258,43 @@
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;First, they can be caused by dropped segments.  In this case, all
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;segments after the dropped segment will trigger duplicate ACKs.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Second, duplicate ACKs can be caused by the re-ordering of data
<BR>
-    segments by the network (not a rare event along some network paths).
<BR>
-    Finally, duplicate ACKs can be caused by replication of ACK or data
<BR>
-    segments by the network.
<BR>
+    segments by the network (not a rare event along some network paths
<BR>
+    [Pax97]).  Finally, duplicate ACKs can be caused by replication of
<BR>
+    ACK or data segments by the network.  In addition, a TCP receiver
<BR>
+    SHOULD send an immediate ACK when the incoming segment fills in all
<BR>
+    or part of a gap in the sequence space.  This will generate more
<BR>
+    timely information for a sender recovering from a loss through a
<BR>
+    retransmission timeout, a fast retransmit, or an experimental loss
<BR>
+    recovery algorithm, such as NewReno [FH98].
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The TCP sender SHOULD use the &quot;fast retransmit&quot; algorithm to detect
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and repair loss, based on incoming duplicate ACKs.  The fast
<BR>
-    retransmit algorithm uses the arrival of 3 duplicate ACKs (i.e., 4
<BR>
-    identical ACKs) as an indication that a segment has been lost.
<BR>
-    After receiving 3 duplicate ACKs, TCP performs a retransmission of
<BR>
-    what appears to be the missing segment, without waiting for the
<BR>
-    retransmission timer to expire.
<BR>
+    retransmit algorithm uses the arrival of 3 duplicate ACKs (4
<BR>
+    identical ACKs without the arrival of any other intervening packets)
<BR>
+    as an indication that a segment has been lost.  After receiving 3
<BR>
+    duplicate ACKs, TCP performs a retransmission of what appears to be
<BR>
+    the missing segment, without waiting for the retransmission timer to
<BR>
+    expire.
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;After the fast retransmit sends what appears to be the missing
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;segment, the &quot;fast recovery&quot; algorithm governs the transmission of
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new data until a non-duplicate ACK arrives.  The reason for not
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;performing slow start is that the receipt of the duplicate ACKs not
<BR>
-    only tells the TCP that a segment has been lost, but also that
<BR>
-    segments are leaving the network.  In other words, since the
<BR>
-    receiver can only generate a duplicate ACK when a segment has
<BR>
-    arrived, that segment has left the network and is in the receiver's
<BR>
-    buffer, so we know it is no longer consuming network resources.
<BR>
-    Furthermore, since the ACK &quot;clock&quot; [Jac88] is preserved, the TCP
<BR>
-    sender can continue to transmit new segments (although transmission
<BR>
-    must continue using a reduced cwnd).
<BR>
+    only indicates that a segment has been lost, but also that segments
<BR>
+    are most likely leaving the network (although a massive segment
<BR>
+    duplication by the network can invalidate this conclusion).  In
<BR>
+    other words, since the receiver can only generate a duplicate ACK
<BR>
+    when a segment has arrived, that segment has left the network and is
<BR>
+    in the receiver's buffer, so we know it is no longer consuming
<BR>
+    network resources.  Furthermore, since the ACK &quot;clock&quot; [Jac88] is
<BR>
+    preserved, the TCP sender can continue to transmit new segments
<BR>
+    (although transmission must continue using a reduced cwnd).
<BR>
&nbsp;
<BR>
+Expires: June, 1999                                             [Page 5]
<BR>
+
<BR>
+draft-ietf-tcpimpl-cong-control-01.txt                     November 1998
<BR>
+
<BR>
+
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The fast retransmit and fast recovery algorithms are usually
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;implemented together as follows.
<BR>
&nbsp;
<BR>
@@ -290,11 +308,6 @@
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.  For each additional duplicate ACK received, increment cwnd by
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MSS.  This artificially inflates the congestion window in order
<BR>
-
<BR>
-Expires: February, 1999                                           [Page 5]
<BR>
-
<BR>
-draft-ietf-tcpimpl-cong-control-00.txt                       August 1998
<BR>
-
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to reflect the additional segment that has left the network.
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.  Transmit a segment, if allowed by the new value of cwnd and the
<BR>
@@ -310,30 +323,13 @@
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out-of-order delivery of data segments at the receiver).
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Additionally, this ACK should acknowledge all the intermediate
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;segments sent between the lost segment and the receipt of the
<BR>
-        first duplicate ACK, if none of these were lost.
<BR>
-    
<BR>
-    Implementing fast retransmit/fast recovery in this manner can lead
<BR>
-    to a phenomenon which allows the fast retransmit algorithm to repair
<BR>
-    multiple dropped segments from a single window of data [Flo94].
<BR>
-    However, in doing so, the size of cwnd is also reduced multiple
<BR>
-    times, which reduces performance.  The following steps MAY be taken
<BR>
-    to reduce the impact of successive fast retransmits on performance.
<BR>
+        third duplicate ACK, if none of these were lost.
<BR>
&nbsp;
<BR>
-    A.  After the third duplicate ACK is received follow step 1 above,
<BR>
-        but also record the highest sequence number transmitted
<BR>
-        (send_high).
<BR>
+    Note: This algorithm is known to generally not recover very
<BR>
+    efficiently from multiple losses in a single flight of packets.  One
<BR>
+    proposed set of modifications to it to address this problem can be
<BR>
+    found in [FH98].
<BR>
&nbsp;
<BR>
-    B.  Instead of reducing cwnd to ssthresh upon receipt of the first
<BR>
-        non-duplicate ACK received (step 5), the sender should wait
<BR>
-        until an ACK covering send_high is received.  In addition, each
<BR>
-        duplicate ACK received should continue to artificially inflate
<BR>
-        cwnd by 1 MSS.
<BR>
-
<BR>
-    C.  A non-duplicate ACK that does not cover send_high, followed by 3
<BR>
-        duplicate ACKs should not reduce ssthresh or cwnd but SHOULD
<BR>
-        trigger a retransmission.  A non-duplicate ACK that does not
<BR>
-        cover send_high SHOULD NOT cause any adjustment in cwnd.
<BR>
-
<BR>
&nbsp;4   Additional Considerations
<BR>
&nbsp;
<BR>
&nbsp;4.1 Re-starting Idle Connections
<BR>
@@ -349,14 +345,14 @@
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Jac88] recommends that a TCP use slow start to restart transmission
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;after a relatively long idle period.  Slow start serves to restart
<BR>
-
<BR>
-Expires: February, 1999                                           [Page 6]
<BR>
-
<BR>
-draft-ietf-tcpimpl-cong-control-00.txt                       August 1998
<BR>
-
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the ACK clock, just as it does at the beginning of a transfer.  This
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mechanism has been widely deployed in the following manner.  When
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TCP has not received a segment for more than one retransmission
<BR>
+
<BR>
+Expires: June, 1999                                             [Page 6]
<BR>
+
<BR>
+draft-ietf-tcpimpl-cong-control-01.txt                     November 1998
<BR>
+
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeout, cwnd is reduced to the value of the restart window (RW)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;before transmission begins.
<BR>
&nbsp;
<BR>
@@ -379,43 +375,82 @@
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;beginning transmission if the TCP has not sent data in an interval
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exceeding the retransmission timeout.
<BR>
&nbsp;
<BR>
-4.2 Acknowledgment Mechanisms
<BR>
+4.2 Generating Acknowledgments
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The delayed ACK algorithm specified in [Bra89] SHOULD be used by a
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TCP receiver.  When used, a TCP receiver MUST NOT excessively delay
<BR>
-    acknowledgments.  Specifically, an ACK MUST be generated for every
<BR>
-    second full-sized segment.  (This &quot;MUST&quot; is listed in [Bra89] in one
<BR>
-    place as a SHOULD and another as a MUST; here we unambiguously state
<BR>
-    it is a MUST.)  Furthermore, an ACK SHOULD be generated for every
<BR>
-    second segment regardless of size.  Finally, an ACK MUST NOT be
<BR>
-    delayed for more than 500 ms waiting on a second full-sized segment
<BR>
-    to arrive.  Out-of-order data segments SHOULD be acknowledged
<BR>
-    immediately, in order to trigger the fast retransmit algorithm.
<BR>
+    acknowledgments.  Specifically, an ACK SHOULD be generated for at
<BR>
+    least every second full-sized segment, and MUST be generated within
<BR>
+    500 ms of the arrival of the first unacknowledged packet.
<BR>
&nbsp;
<BR>
-    A TCP receiver MUST NOT generate more than one ACK for every
<BR>
-    incoming segment.
<BR>
+    The requirement that an ACK &quot;SHOULD&quot; be generated for at least every
<BR>
+    second full-sized segment is listed in [Bra89] in one place as a
<BR>
+    SHOULD and another as a MUST.  Here we unambiguously state it is a
<BR>
+    SHOULD.  We also emphasize that this is a &quot;strong&quot; SHOULD, meaning
<BR>
+    that an implementor should indeed only deviate from this requirement
<BR>
+    after careful consideration of the implications.  See the discussion
<BR>
+    of &quot;Stretch ACK violation&quot; in [PAD+98] and the references therein
<BR>
+    for a discussion of the possible performance problems with
<BR>
+    generating ACKs less frequently than every second full-sized
<BR>
+    segment.
<BR>
&nbsp;
<BR>
-    TCP implementations that implement the selective acknowledgment
<BR>
-    (SACK) option [MMFR96] are able to determine which segments have not
<BR>
-    arrived at the receiver.  Consequently, they can retransmit the lost
<BR>
-    segments more quickly than TCPs without SACKs.  This allows a TCP
<BR>
-    sender to repair multiple losses in roughly one RTT after detecting
<BR>
-    loss [FF96,MM96a,MM96b].  While no specific SACK-based recovery
<BR>
-    algorithm has yet been standardized, any SACK-based algorithm should
<BR>
-    follow the general principles embodied by the above algorithms.
<BR>
-    First, as soon as loss is detected, ssthresh should be decreased per
<BR>
-    equation (3).  Second, in the RTT following loss detection, the
<BR>
-    number of segments sent should be no more than half the number
<BR>
-    transmitted in the previous RTT (i.e., before loss occurred).
<BR>
-    Third, after the recovery period is finished, cwnd should be set to
<BR>
+    In some cases, the sender and receiver may not agree on what what
<BR>
+    constitutes a full-sized segment.  An implementation is deemed to
<BR>
+    comply with this requirement if it sends at least one acknowledgment
<BR>
+    every time it receives 2*MSS bytes of new data from the sender,
<BR>
+    where MSS is the Maximum Segment Size specified by the receiver to
<BR>
+    the sender (or the default value of 536 bytes, per [Bra89], if the
<BR>
+    receiver does not specify an MSS option during connection
<BR>
+    establishment).  Finally, we repeat that an ACK MUST NOT be delayed
<BR>
+    for more than 500 ms waiting on a second full-sized segment to
<BR>
+    arrive.  Out-of-order data segments SHOULD be acknowledged
<BR>
+    immediately, in order to accelerate loss recovery.  To trigger the
<BR>
+    fast retransmit algorithm, the receiver SHOULD send an immediate
<BR>
+    duplicate ACK when it receives a data segment above a gap in the
<BR>
&nbsp;
<BR>
-Expires: February, 1999                                           [Page 7]
<BR>
+Expires: June, 1999                                             [Page 7]
<BR>
&nbsp;
<BR>
-draft-ietf-tcpimpl-cong-control-00.txt                       August 1998
<BR>
+draft-ietf-tcpimpl-cong-control-01.txt                     November 1998
<BR>
&nbsp;
<BR>
-    the reduced value of ssthresh.  The SACK-based algorithms outlined
<BR>
-    in [FF96,MM96a,MM96b] adhere to these guidelines.
<BR>
+    sequence space.  To provide feedback to senders recovering from
<BR>
+    losses, the receiver SHOULD send an immediate ACK when it receives a
<BR>
+    data segment that fills in all or part of a gap in the sequence
<BR>
+    space.
<BR>
&nbsp;
<BR>
+    A TCP receiver MUST NOT generate more than one ACK for every
<BR>
+    incoming segment, other than to update the offered window as the
<BR>
+    receiving application consumes new data.
<BR>
+
<BR>
+4.4 Loss Recovery Mechanisms
<BR>
+    
<BR>
+    A number of loss recovery algorithms that augment fast retransmit
<BR>
+    and fast recovery have been suggested by TCP researchers.  While
<BR>
+    some of these algorithms are based on the TCP selective
<BR>
+    acknowledgment (SACK) option [MMFR96], such as [FF96,MM96a,MM96b],
<BR>
+    others do not require SACKs [Hoe96,FF96,FH98].  The non-SACK
<BR>
+    algorithms use ``partial acknowledgments'' (ACKs which cover new
<BR>
+    data, but not all the data outstanding when loss was detected) to
<BR>
+    trigger retransmissions.  While this document does not standardize
<BR>
+    any of the specific algorithms that may improve fast retransmit/fast
<BR>
+    recovery, these enhanced algorithms are implicitly allowed, as long
<BR>
+    as they follow the general principles of the basic four algorithms
<BR>
+    outlined above.
<BR>
+
<BR>
+    Therefore, when the first loss in a window of data is detected,
<BR>
+    ssthresh MUST be set to no more than the value given by equation
<BR>
+    (3).  Second, until all lost segments in the window of data in
<BR>
+    question are repaired, the number of segments transmitted in each
<BR>
+    RTT MUST be no more than half the number of outstanding segments
<BR>
+    when the loss was detected.  Finally, after all loss in the given
<BR>
+    window of segments has been successfully retransmitted, cwnd MUST be
<BR>
+    set to no more than ssthresh and congestion avoidance MUST be used
<BR>
+    to further increase cwnd.  Loss in two successive windows of data,
<BR>
+    or the loss of a retransmission, should be taken as two indications
<BR>
+    of congestion and, therefore, cwnd (and ssthresh) MUST be lowered
<BR>
+    twice in this case.  The algorithms outlined in
<BR>
+    [Hoe96,FF96,MM96a,MM6b] follow the principles of the basic four
<BR>
+    congestion control algorithms outlined in this document.
<BR>
+
<BR>
&nbsp;5.  Security Considerations
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This document requires a TCP to diminish its sending rate in the
<BR>
@@ -431,6 +466,11 @@
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The Internet to a considerable degree relies on the correct
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;implementation of these algorithms in order to preserve network
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stability and avoid congestion collapse.  An attacker could cause
<BR>
+
<BR>
+Expires: June, 1999                                             [Page 8]
<BR>
+
<BR>
+draft-ietf-tcpimpl-cong-control-01.txt                     November 1998
<BR>
+
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TCP endpoints to respond more aggressively in the face of congestion
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by forging excessive duplicate acknowledgments or excessive
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acknowledgments for new data.  Conceivably, such an attack could
<BR>
@@ -448,16 +488,13 @@
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Addison-Wesley, 1995).  This material is used with the permission
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of Addison-Wesley.
<BR>
&nbsp;
<BR>
-    Sally Floyd devised the algorithm presented in section 3.3 for
<BR>
-    avoiding multiple cwnd cutbacks in the presence of multiple packets
<BR>
-    lost from the same flight.  Craig Partridge and Joe Touch
<BR>
+    Neal Cardwell, Sally Floyd, Craig Partridge and Joe Touch
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contributed a number of helpful suggestions.
<BR>
-    
<BR>
+
<BR>
&nbsp;References
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[AFP98] M. Allman, S. Floyd, C. Partridge, Increasing TCP's Initial
<BR>
-        Window Size, Internet-Draft draft-floyd-incr-init-win-03.txt.
<BR>
-        May, 1998.  (Work in progress).
<BR>
+        Window Size, September 1998.  RFC 2414.
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Bra89] B. Braden, ed., &quot;Requirements for Internet Hosts --
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Communication Layers,&quot; RFC 1122, Oct. 1989.
<BR>
@@ -465,27 +502,34 @@
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Bra97] S. Bradner, &quot;Key words for use in RFCs to Indicate
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Requirement Levels&quot;, BCP 14, RFC 2119, March 1997.
<BR>
&nbsp;
<BR>
-    
<BR>
-    
<BR>
+    [FF96] K. Fall, S. Floyd.  Simulation-based Comparisons of Tahoe,
<BR>
+        Reno and SACK TCP.  Computer Communication Review, July 1996.
<BR>
+        <A HREF="ftp://ftp.ee.lbl.gov/papers/sacks.ps.Z">ftp://ftp.ee.lbl.gov/papers/sacks.ps.Z</A>.
<BR>
&nbsp;
<BR>
-Expires: February, 1999                                           [Page 8]
<BR>
-
<BR>
-draft-ietf-tcpimpl-cong-control-00.txt                       August 1998
<BR>
+    [FH98] S. Floyd, T. Henderson.  The NewReno Modification to TCP's
<BR>
+        Fast Recovery Algorithm.  Internet-Draft
<BR>
+        draft-ietf-tcpimpl-newreno-00.txt, November 1998.  (Work in
<BR>
+        progress).
<BR>
&nbsp;
<BR>
-    [FF96] Kevin Fall and Sally Floyd.  Simulation-based Comparisons of
<BR>
-        Tahoe, Reno and SACK TCP.  Computer Communication Review, July
<BR>
-        1996.  <A HREF="ftp://ftp.ee.lbl.gov/papers/sacks.ps.Z">ftp://ftp.ee.lbl.gov/papers/sacks.ps.Z</A>.
<BR>
-    
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Flo94] S. Floyd, TCP and Successive Fast Retransmits. Technical
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;report, October 1994.
<BR>
-        <A HREF="ftp://ftp.ee.lbl.gov/papers/fastretrans.ps">ftp://ftp.ee.lbl.gov/papers/fastretrans.ps</A>.
<BR>
-    
<BR>
-    [HTH98] Amy Hughes, Joe Touch, John Heidemann.  Internet-Draft
<BR>
+	<A HREF="ftp://ftp.ee.lbl.gov/papers/fastretrans.ps">ftp://ftp.ee.lbl.gov/papers/fastretrans.ps</A>.
<BR>
+
<BR>
+    [Hoe96] J. Hoe, Improving the Start-up Behavior of a Congestion
<BR>
+        Control Scheme for TCP.  In ACM SIGCOMM, August 1996.
<BR>
+
<BR>
+    [HTH98] A. Hughes, J. Touch, J. Heidemann.  Issues in TCP Slow-Start
<BR>
+        Restart After Idle.  Internet-Draft
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;draft-ietf-tcpimpl-restart-00.txt, March 1998.  (Work in
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;progress).
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Jac88] V. Jacobson, &quot;Congestion Avoidance and Control,&quot; Computer
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Communication Review, vol. 18, no. 4, pp. 314-329, Aug. 1988.
<BR>
+
<BR>
+Expires: June, 1999                                             [Page 9]
<BR>
+
<BR>
+draft-ietf-tcpimpl-cong-control-01.txt                     November 1998
<BR>
+
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="ftp://ftp.ee.lbl.gov/papers/congavoid.ps.Z">ftp://ftp.ee.lbl.gov/papers/congavoid.ps.Z</A>.
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Jac90] V. Jacobson, &quot;Modified TCP Congestion Avoidance Algorithm,&quot;
<BR>
@@ -504,11 +548,14 @@
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[MMFR96] M. Mathis, J. Mahdavi, S. Floyd, A. Romanow, &quot;TCP Selective
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Acknowledgement Options&quot;, RFC 2018, October 1996.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<BR>
-    [PAD+98] V. Paxson, M. Allman, S. Dawson, J. Griner, I. Heavens,
<BR>
-        K. Lahey, J. Semke, B. Volz.  Internet-Draft
<BR>
-        draft-ietf-tcpimpl-prob-04.txt, August 1998.  (Work in
<BR>
+    [PAD+98] V. Paxson, M. Allman, S. Dawson, W. Fenner, J. Griner,
<BR>
+	I. Heavens, K. Lahey, J. Semke, B. Volz.  Internet-Draft
<BR>
+        draft-ietf-tcpimpl-prob-05.txt, October 1998.  (Work in
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;progress).
<BR>
&nbsp;
<BR>
+    [Pax97] V. Paxson, &quot;End-to-End Internet Packet Dynamics,&quot;
<BR>
+        Proceedings of SIGCOMM '97, Cannes, France, Sep. 1997.
<BR>
+    
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Pos81] J. Postel, Transmission Control Protocol, September 1981.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RFC 793.
<BR>
&nbsp;
<BR>
@@ -527,19 +574,23 @@
<BR>
&nbsp;
<BR>
&nbsp;
<BR>
&nbsp;
<BR>
-Expires: February, 1999                                           [Page 9]
<BR>
+
<BR>
+
<BR>
+
<BR>
+
<BR>
+
<BR>
+
<BR>
+
<BR>
+
<BR>
+
<BR>
+
<BR>
+
<BR>
+Expires: June, 1999                                            [Page 10]
<BR>
&nbsp;
<BR>
-draft-ietf-tcpimpl-cong-control-00.txt                       August 1998
<BR>
+draft-ietf-tcpimpl-cong-control-01.txt                     November 1998
<BR>
&nbsp;
<BR>
&nbsp;Author's  Address:
<BR>
&nbsp;
<BR>
-    W. Richard Stevens
<BR>
-    1202 E. Paseo del Zorro
<BR>
-    Tucson, AZ  85718
<BR>
-    520-297-9416
<BR>
-    <A HREF="mailto:rstevens@kohala.com?Subject=Re:%20Last%20Call%20for%20TCP%20Congestion%20Control%20I-D&In-Reply-To=&lt;199811101828.KAA18295@daffy.ee.lbl.gov&gt;">rstevens@kohala.com</A>
<BR>
-    <A HREF="http://www.kohala.com/~rstevens">http://www.kohala.com/~rstevens</A>
<BR>
-
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mark Allman
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NASA Lewis Research Center/Sterling Software
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;21000 Brookpark Rd.  MS 54-2
<BR>
@@ -556,6 +607,12 @@
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;510-486-7504
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="mailto:vern@ee.lbl.gov?Subject=Re:%20Last%20Call%20for%20TCP%20Congestion%20Control%20I-D&In-Reply-To=&lt;199811101828.KAA18295@daffy.ee.lbl.gov&gt;">vern@ee.lbl.gov</A>
<BR>
&nbsp;
<BR>
+    W. Richard Stevens
<BR>
+    1202 E. Paseo del Zorro
<BR>
+    Tucson, AZ  85718
<BR>
+    520-297-9416
<BR>
+    <A HREF="mailto:rstevens@kohala.com?Subject=Re:%20Last%20Call%20for%20TCP%20Congestion%20Control%20I-D&In-Reply-To=&lt;199811101828.KAA18295@daffy.ee.lbl.gov&gt;">rstevens@kohala.com</A>
<BR>
+    <A HREF="http://www.kohala.com/~rstevens">http://www.kohala.com/~rstevens</A>
<BR>
&nbsp;
<BR>
&nbsp;
<BR>
&nbsp;
<BR>
@@ -586,5 +643,6 @@
<BR>
&nbsp;
<BR>
&nbsp;
<BR>
&nbsp;
<BR>
-Expires: February, 1999                                          [Page 10]
<BR>
+
<BR>
+Expires: June, 1999                                            [Page 11]
<BR>
&nbsp;
<BR>
<P><!-- body="end" -->
<HR NOSHADE>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="1391.html">Kevin M. Lahey: "Re: Last Call for TCP Congestion Control I-D"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="1389.html">Vern Paxson: "Last Call for TCP Congestion Control I-D"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="1389.html">Vern Paxson: "Last Call for TCP Congestion Control I-D"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="1391.html">Kevin M. Lahey: "Re: Last Call for TCP Congestion Control I-D"</A>
<!-- reply="end" -->
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#1390">[ date ]</A>
<A HREF="index.html#1390">[ thread ]</A>
<A HREF="subject.html#1390">[ subject ]</A>
<A HREF="author.html#1390">[ author ]</A>
</UL>
<!-- trailer="footer" -->
<HR NOSHADE>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.hypermail.org/">hypermail 2b29</A> 
: <EM>Tue Sep 19 2000 - 11:53:10 EDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
