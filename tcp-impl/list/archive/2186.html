<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>TCP-IMPL Mailing List Archive: Re: Send window update algorithm</TITLE>
<META NAME="Author" CONTENT="kuznet@ms2.inr.ac.ru (kuznet@ms2.inr.ac.ru)">
<META NAME="Subject" CONTENT="Re: Send window update algorithm ...">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Re: Send window update algorithm ...</H1>
<!-- received="Wed Jun 28 13:08:40 2000" -->
<!-- isoreceived="20000628170840" -->
<!-- sent="Wed, 28 Jun 2000 20:56:03 +0400 (MSK DST)" -->
<!-- isosent="20000628165603" -->
<!-- name="kuznet@ms2.inr.ac.ru" -->
<!-- email="kuznet@ms2.inr.ac.ru" -->
<!-- subject="Re: Send window update algorithm ..." -->
<!-- id="200006281656.UAA01363@ms2.inr.ac.ru" -->
<!-- inreplyto="3958F301.13815801@Novell.COM" -->
<STRONG>From:</STRONG> <A HREF="mailto:kuznet@ms2.inr.ac.ru?Subject=Re:%20Send%20window%20update%20algorithm%20...&In-Reply-To=&lt;200006281656.UAA01363@ms2.inr.ac.ru&gt;"><EM>kuznet@ms2.inr.ac.ru</EM></A><BR>
<STRONG>Date:</STRONG> Wed Jun 28 2000 - 12:56:03 EDT
<P>
<!-- next="start" -->
<UL>
<LI><STRONG>Next message:</STRONG> <A HREF="2187.html">Ramesh Shankar: "Re: Send window update algorithm ..."</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="2185.html">Ramesh Shankar: "Send window update algorithm ..."</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="2185.html">Ramesh Shankar: "Send window update algorithm ..."</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="2187.html">Ramesh Shankar: "Re: Send window update algorithm ..."</A>
<LI><STRONG>Reply:</STRONG> <A HREF="2187.html">Ramesh Shankar: "Re: Send window update algorithm ..."</A>
<!-- reply="end" -->
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#2186">[ date ]</A>
<A HREF="index.html#2186">[ thread ]</A>
<A HREF="subject.html#2186">[ subject ]</A>
<A HREF="author.html#2186">[ author ]</A>
</UL>
<HR NOSHADE><P>
<!-- body="start" -->
<P>
Hello!
<BR>
<P><EM>&gt; - OR if (SEG.ACK &gt; SND.WL2) [Set SND.WL2 = SEG.ACK]
</EM><BR>
<P>The same problem is present in Linux tcp implementation.
<BR>
<P>This idea was the first, which came to my head.
<BR>
But then I understood that it is highly dubious.
<BR>
Look, with this change SND.UNA==SND.WL2 _identically_ and
<BR>
can be simple omitted from TCB state. Right? 8)8)
<BR>
So, the idea is suspiciously good. 8)
<BR>
<P>To all that I understood, RFC791 window update algorithm,
<BR>
ignoring window updates with SEG.SEQ &lt; SND.WL1, is designed
<BR>
in assumption that receiver MAY _shrink_ window deliberately.
<BR>
In this case check SEG.SEQ &gt;= SND.WL1 prevents spurious window
<BR>
reopening.
<BR>
<P>Essentially, TCP is designed to deliver reliably
<BR>
not only data, but also window updates. Certainly,
<BR>
it is useful only if receiver is allowed to shrink window,
<BR>
so that its status is marginal. Maybe, RFC is even wrong.
<BR>
I would prefer that it were wrong. 8)
<BR>
<P><P>So. The thing, which I proposed to make in this situation is:
<BR>
<P>1. To leave RFC algorithm intact, as checked and proven by time.
<BR>
<P>2. But in the case, when an ACK advances SND.UNA, but
<BR>
&nbsp;&nbsp;&nbsp;window update from it is ignored by RFC rules,
<BR>
&nbsp;&nbsp;&nbsp;hold right edge of window untouched.
<BR>
&nbsp;&nbsp;&nbsp;I.e. reduce SND.WND by SEG.ACK-oldSND.UNA.
<BR>
<P>This change is more conservative.
<BR>
<P>Note that it works exactly as with your change in the situation
<BR>
of lockup, described by you. But it is more robust, because
<BR>
it rejects spurious window inflation, when receiver really tries
<BR>
to shrink window.
<BR>
<P>Alexey Kuznetsov
<BR>
<P><!-- body="end" -->
<HR NOSHADE>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="2187.html">Ramesh Shankar: "Re: Send window update algorithm ..."</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="2185.html">Ramesh Shankar: "Send window update algorithm ..."</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="2185.html">Ramesh Shankar: "Send window update algorithm ..."</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="2187.html">Ramesh Shankar: "Re: Send window update algorithm ..."</A>
<LI><STRONG>Reply:</STRONG> <A HREF="2187.html">Ramesh Shankar: "Re: Send window update algorithm ..."</A>
<!-- reply="end" -->
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#2186">[ date ]</A>
<A HREF="index.html#2186">[ thread ]</A>
<A HREF="subject.html#2186">[ subject ]</A>
<A HREF="author.html#2186">[ author ]</A>
</UL>
<!-- trailer="footer" -->
<HR NOSHADE>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.hypermail.org/">hypermail 2b29</A> 
: <EM>Tue Sep 19 2000 - 11:54:35 EDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
