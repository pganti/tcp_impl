<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>TCP-IMPL Mailing List Archive: Re: ISA used in TCP/IP/UDP</TITLE>
<META NAME="Author" CONTENT="Joe Touch (touch@ISI.EDU)">
<META NAME="Subject" CONTENT="Re: ISA used in TCP/IP/UDP">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Re: ISA used in TCP/IP/UDP</H1>
<!-- received="Tue Jun 20 15:06:58 2000" -->
<!-- isoreceived="20000620190658" -->
<!-- sent="Tue, 20 Jun 2000 11:57:40 -0700" -->
<!-- isosent="20000620185740" -->
<!-- name="Joe Touch" -->
<!-- email="touch@ISI.EDU" -->
<!-- subject="Re: ISA used in TCP/IP/UDP" -->
<!-- id="394FBEA4.20F9AE41@isi.edu" -->
<!-- inreplyto="200006201736.NAA08686@klos.com" -->
<STRONG>From:</STRONG> Joe Touch (<A HREF="mailto:touch@ISI.EDU?Subject=Re:%20ISA%20used%20in%20TCP/IP/UDP&In-Reply-To=&lt;394FBEA4.20F9AE41@isi.edu&gt;"><EM>touch@ISI.EDU</EM></A>)<BR>
<STRONG>Date:</STRONG> Tue Jun 20 2000 - 14:57:40 EDT
<P>
<!-- next="start" -->
<UL>
<LI><STRONG>Next message:</STRONG> <A HREF="2183.html">Craig Partridge: "Re: ISA used in TCP/IP/UDP"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="2181.html">Vernon Schryver: "Re: ISA used in TCP/IP/UDP"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="2180.html">Patrick Klos: "Re: ISA used in TCP/IP/UDP"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="2181.html">Vernon Schryver: "Re: ISA used in TCP/IP/UDP"</A>
<!-- reply="end" -->
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#2182">[ date ]</A>
<A HREF="index.html#2182">[ thread ]</A>
<A HREF="subject.html#2182">[ subject ]</A>
<A HREF="author.html#2182">[ author ]</A>
</UL>
<HR NOSHADE><P>
<!-- body="start" -->
<P>
Patrick Klos wrote:
<BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; &gt;&gt; Sure, if you have DMA.  A DMA controller that could compute a running
</EM><BR>
<EM>&gt; &gt;&gt; checksum would be cool.
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;We implemented one here at ISI in 1996, and it was based on emulating in
</EM><BR>
<EM>&gt; &gt;multiple chips what other DMA designers had already done. Not so much
</EM><BR>
<EM>&gt; &gt;cool, as cold.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Well, I expect (most of) the rest of the world hasn't seen this
</EM><BR>
<EM>&gt; implementation.  Nor am I aware of any processor (i.e. single CPU) that
</EM><BR>
<EM>&gt; has integrated such a feature into it's core.
</EM><BR>
<P>DMAs have it, typically ones developed for NICs. If you're DMAing data
<BR>
more than once, you have other places to optimize.
<BR>
<P><EM>&gt; &gt;Given typical processor pipelines, the arithmetic 'carry-add' is masked
</EM><BR>
<EM>&gt; &gt;by the bubble generated by the data move anyway.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; You appear to be missing the point - the original question asked was &quot;what
</EM><BR>
<EM>&gt; instructions could be added to a processor to make coding TCP/IP stacks
</EM><BR>
<EM>&gt; more efficient&quot; (if I paraphrased it correctly?).  Maybe this person
</EM><BR>
<EM>&gt; wants to build a new lightweight processor with similar efficiency to
</EM><BR>
<EM>&gt; today's complex processors, and target network devices specifically?
</EM><BR>
<P>What I'm saying is that computation can be overlapped with data moves
<BR>
sufficiently that having a separate instruction doesn't make it run any
<BR>
faster. And (as below) that most of the problems are implementation
<BR>
related, not due to lack of processor capability.
<BR>
<P><EM>&gt; &gt;&gt; &gt;&gt; 5)  Built-in &quot;mbuf&quot;s?  I.e. the processor understands a specific scheme
</EM><BR>
...
<BR>
<EM>&gt; It could make it easier to have code that says &quot;give me bytes 20 and 21
</EM><BR>
<EM>&gt; of this packet&quot; without the code having to walk the mbufs itself.  It
</EM><BR>
<EM>&gt; would make it easier to extract data from the packet arbitrarily.
</EM><BR>
<P>If those bytes aren't simple offsets from a single pointer, then you
<BR>
have other problems.
<BR>
<P><EM>&gt; You make it sound as if you don't think there are any possible enhancements
</EM><BR>
<EM>&gt; that could be made to a processor to optimize TCP/IP stack implementation?
</EM><BR>
<P>I think most of the issues of inefficiency are related to implementation
<BR>
specifics, not the lack of necessary instructions. Just one opinion,
<BR>
though.
<BR>
<P>Joe
<BR>
<P><!-- body="end" -->
<HR NOSHADE>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="2183.html">Craig Partridge: "Re: ISA used in TCP/IP/UDP"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="2181.html">Vernon Schryver: "Re: ISA used in TCP/IP/UDP"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="2180.html">Patrick Klos: "Re: ISA used in TCP/IP/UDP"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="2181.html">Vernon Schryver: "Re: ISA used in TCP/IP/UDP"</A>
<!-- reply="end" -->
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#2182">[ date ]</A>
<A HREF="index.html#2182">[ thread ]</A>
<A HREF="subject.html#2182">[ subject ]</A>
<A HREF="author.html#2182">[ author ]</A>
</UL>
<!-- trailer="footer" -->
<HR NOSHADE>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.hypermail.org/">hypermail 2b29</A> 
: <EM>Tue Sep 19 2000 - 11:54:34 EDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
