<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>TCP-IMPL Mailing List Archive: Proposed test for TCP initial sl</TITLE>
<META NAME="Author" CONTENT="sparker@Eng.Sun.COM (sparker@Eng.Sun.COM)">
<META NAME="Subject" CONTENT="Proposed test for TCP initial slow start...">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Proposed test for TCP initial slow start...</H1>
<!-- received="Tue Apr 29 17:57:33 1997" -->
<!-- isoreceived="19970429215733" -->
<!-- sent="Tue, 29 Apr 1997 17:44:11 -0700" -->
<!-- isosent="19970430004411" -->
<!-- name="sparker@Eng.Sun.COM" -->
<!-- email="sparker@Eng.Sun.COM" -->
<!-- subject="Proposed test for TCP initial slow start..." -->
<!-- id="199704300044.RAA20112@fstop." -->
<STRONG>From:</STRONG> <A HREF="mailto:sparker@Eng.Sun.COM?Subject=Re:%20Proposed%20test%20for%20TCP%20initial%20slow%20start...&In-Reply-To=&lt;199704300044.RAA20112@fstop.&gt;"><EM>sparker@Eng.Sun.COM</EM></A><BR>
<STRONG>Date:</STRONG> Tue Apr 29 1997 - 20:44:11 EDT
<P>
<!-- next="start" -->
<UL>
<LI><STRONG>Next message:</STRONG> <A HREF="0370.html">C. Harald Koch: "Re: TCP keep-alives"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0368.html">Larry Backman: "TCP keep-alives &amp; Reality bites"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#369">[ date ]</A>
<A HREF="index.html#369">[ thread ]</A>
<A HREF="subject.html#369">[ subject ]</A>
<A HREF="author.html#369">[ author ]</A>
</UL>
<HR NOSHADE><P>
<!-- body="start" -->
<P>
In my packet shell, I wrote a script which I think tests whether a
<BR>
correspondent TCP has initial slow start.  The method I used was:
<BR>
<P>1.  Send an initial SYN, to port 19 (chargen)
<BR>
2.  Wait for a SYN-ACK
<BR>
3.  Send an ACK back
<BR>
4.  Listen for two seconds, expecting no segments
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(However, notice if the segment is a retransmission of the first segment)
<BR>
5.  Send an ACK back for the first segment
<BR>
6.  Listen for two seconds, expecting two new segments
<BR>
<P><P>In writing this I assumed I didn't need to do anything special to illicit
<BR>
the failure to use slow start.  By using 'chargen', I avoid needing to
<BR>
have any program on the system being tested, at least most of the time.
<BR>
<P>I chose to listen for two seconds under the presumption the TCP being
<BR>
tested complies with RFC2001's recommendation of 3s for an initial RTO.
<BR>
The test notices if a retransmission occurs doing the first two seconds
<BR>
after the connection is established.  In that case, the test complains
<BR>
about the initial RTO and exits.
<BR>
<P>The second loop could use some more refinement.  It doesn't do as much
<BR>
checking of the sequences received as it could.  What it does check is
<BR>
that it receives two segements with different sequence numbers from
<BR>
the previous packet's.  However, as long as the ACK of the first segment
<BR>
is acceptable, and a retransmission isn't already in progress, this
<BR>
should be good enough.
<BR>
<P>Also, I don't take it further than slow start opening up from one segment
<BR>
to two segments.  The test could be better by using a large window relative
<BR>
to MSS and checking that slow start opens up correctly to a larger number
<BR>
of segments.  I didn't do this, in part, because it seemed a bit like a
<BR>
separate problem.
<BR>
<P>Anyway, I'm interested in input from the group about the test.
<BR>
<P>The test is found in /opt/psh/scripts/tcp-impl directory of the packet
<BR>
shell when installed.  The file no_initial_slow_start.pst is the source.
<BR>
You can run them by invoking the test harness /opt/psh/bin/harness while
<BR>
in that directory.  Edit the 'config' file to point it at the target.
<BR>
<P><P>Cheers,
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~sparker
<BR>
<P><!-- body="end" -->
<HR NOSHADE>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0370.html">C. Harald Koch: "Re: TCP keep-alives"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0368.html">Larry Backman: "TCP keep-alives &amp; Reality bites"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#369">[ date ]</A>
<A HREF="index.html#369">[ thread ]</A>
<A HREF="subject.html#369">[ subject ]</A>
<A HREF="author.html#369">[ author ]</A>
</UL>
<!-- trailer="footer" -->
<HR NOSHADE>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.hypermail.org/">hypermail 2b29</A> 
: <EM>Tue Sep 19 2000 - 11:44:19 EDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
