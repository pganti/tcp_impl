<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>TCP-IMPL Mailing List Archive: Sending FINs into zero windows.</TITLE>
<META NAME="Author" CONTENT="Andi Kleen (andi@zero.aec.at)">
<META NAME="Subject" CONTENT="Sending FINs into zero windows.">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Sending FINs into zero windows.</H1>
<!-- received="Tue Dec  9 10:47:08 1997" -->
<!-- isoreceived="19971209154708" -->
<!-- sent="Tue, 09 Dec 1997 19:38:48 +0100" -->
<!-- isosent="19971209183848" -->
<!-- name="Andi Kleen" -->
<!-- email="andi@zero.aec.at" -->
<!-- subject="Sending FINs into zero windows." -->
<!-- id="19971209183848.30557.qmail@zero.aec.at" -->
<STRONG>From:</STRONG> Andi Kleen (<A HREF="mailto:andi@zero.aec.at?Subject=Re:%20Sending%20FINs%20into%20zero%20windows.&In-Reply-To=&lt;19971209183848.30557.qmail@zero.aec.at&gt;"><EM>andi@zero.aec.at</EM></A>)<BR>
<STRONG>Date:</STRONG> Tue Dec 09 1997 - 13:38:48 EST
<P>
<!-- next="start" -->
<UL>
<LI><STRONG>Next message:</STRONG> <A HREF="0854.html">Graham Cope: "Re: When to reset TCP's timer?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0852.html">Vern Paxson: "agenda for next Monday's TCPIMPL WG meeting"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#853">[ date ]</A>
<A HREF="index.html#853">[ thread ]</A>
<A HREF="subject.html#853">[ subject ]</A>
<A HREF="author.html#853">[ author ]</A>
</UL>
<HR NOSHADE><P>
<!-- body="start" -->
<P>
Hello,
<BR>
<P>I'm currently trying to fix a TCP communication problem between a 
<BR>
HP jetdirect based printer and a Linux 2.0.30 box. It seems the 
<BR>
application side of the linux box closes the connection, but it can't
<BR>
send the FIN out because the printer announced a zero window.  This
<BR>
causes Linux to send a RST on the next ACK from the printer, which 
<BR>
causes the printer to abort the print job. 
<BR>
<P>Here is tcpdump output for illustration:
<BR>
<P>16:18:50.053007 dinf05.1067 &gt; prigbc.9100: P 421889:422913(1024) ack 139 wi=
<BR>
n 31744 (DF)
<BR>
16:18:50.053007 dinf05.1067 &gt; prigbc.9100: P 422913:423937(1024) ack 139 wi=
<BR>
n 31744 (DF)
<BR>
16:18:50.053007 dinf05.1067 &gt; prigbc.9100: P 423937:424961(1024) ack 139 wi=
<BR>
n 31744 (DF)
<BR>
16:18:50.333007 prigbc.9100 &gt; dinf05.1067: . ack 424961 win 720
<BR>
16:18:51.003007 dinf05.1067 &gt; prigbc.9100: P 424961:425681(720) ack 139 win=
<BR>
&nbsp;31744
<BR>
16:18:51.023007 prigbc.9100 &gt; dinf05.1067: . 139:162(23) ack 425681 win 0
<BR>
16:18:51.023007 dinf05.1067 &gt; prigbc.9100: R 819166584:819166584(0) win 0
<BR>
<P>I looked at the 4.4BSD source code and it seems to just send out
<BR>
window probes with the FIN bit set in this situation. What is the
<BR>
current wisdom to fix the problem?
<BR>
<P>-Andi
<BR>
<P><!-- body="end" -->
<HR NOSHADE>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0854.html">Graham Cope: "Re: When to reset TCP's timer?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0852.html">Vern Paxson: "agenda for next Monday's TCPIMPL WG meeting"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#853">[ date ]</A>
<A HREF="index.html#853">[ thread ]</A>
<A HREF="subject.html#853">[ subject ]</A>
<A HREF="author.html#853">[ author ]</A>
</UL>
<!-- trailer="footer" -->
<HR NOSHADE>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.hypermail.org/">hypermail 2b29</A> 
: <EM>Tue Sep 19 2000 - 11:52:12 EDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
